<!-- 购物车页面 -->
<view class="cart-container">
  <view class="cart-header">
    <view class="cart-title">我的购物车</view>
    <view class="back-button" bindtap="goBack">
      <image src="../../static/images/back.png" mode="aspectFit"></image>
    </view>
  </view>
  
  <!-- 空购物车状态 -->
  <view class="empty-cart" wx:if="{{cartItems.length === 0}}">
    <image src="../../static/images/tkimg.png" mode="aspectFit" class="empty-image"></image>
    <view class="empty-text">购物车还是空的</view>
    <button class="go-shopping" bindtap="goShopping">去逛逛</button>
  </view>
  
  <!-- 购物车商品列表 -->
  <view class="cart-items" wx:else>
    <view class="cart-item" wx:for="{{cartItems}}" wx:key="id">
      <view class="item-image">
        <image src="{{item.image}}" mode="aspectFit"></image>
      </view>
      <view class="item-info">
        <view class="item-name">{{item.name}}</view>
        <view class="item-price">¥{{item.price}}</view>
        <view class="item-actions">
          <view class="quantity-control">
            <view class="quantity-btn" bindtap="decreaseQuantity" data-id="{{item.id}}">-</view>
            <view class="quantity">{{item.quantity}}</view>
            <view class="quantity-btn" bindtap="increaseQuantity" data-id="{{item.id}}">+</view>
          </view>
          <view class="delete-btn" bindtap="removeFromCart" data-id="{{item.id}}">删除</view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 底部结算栏 -->
  <view class="checkout-bar" wx:if="{{cartItems.length > 0}}">
    <view class="total-info">
      <view class="total-text">合计：</view>
      <view class="total-price">¥{{totalPrice.toFixed(2)}}</view>
    </view>
    <view class="checkout-btn" bindtap="checkout" hover-class="checkout-btn-hover">结算({{totalQuantity}})</view>
  </view>
  
  <!-- 调试信息 -->
  <view class="debug-info" wx:if="{{cartItems.length > 0}}">
    购物车商品数: {{cartItems.length}}, 总数量: {{totalQuantity}}, 总价: {{totalPrice.toFixed(2)}}
  </view>
  
  <!-- 推荐商品 -->
  <view class="recommended-section" wx:if="{{cartItems.length === 0}}">
    <view class="section-title">猜你喜欢</view>
    <view class="recommended-list">
      <view class="recommended-item" wx:for="{{recommendedProducts}}" wx:key="id" bindtap="addRecommendedToCart" data-id="{{item.id}}">
        <image src="{{item.image}}" mode="aspectFit"></image>
        <view class="recommended-name">{{item.name}}</view>
        <view class="recommended-price">¥{{item.price}}</view>
      </view>
    </view>
  </view>
</view>